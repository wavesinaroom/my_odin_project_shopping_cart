<<<<<<< HEAD

import React from "react";
import {cleanup, fireEvent, render, screen, waitFor} from "@testing-library/react";
import  userEvent from "@testing-library/user-event";
import '@testing-library/jest-dom';
import {MemoryRouter, Route, Routes} from "react-router-dom";
import Store from "./store"
import ItemPanel from "./components/itemPanel";

afterEach(cleanup);

it(`Renders correctly`,()=>{
  render(
    <MemoryRouter>
      <Routes>
        <Route path='/' element={<Store/>}/>
        <Route path='/item' element={<ItemPanel/>}/>
      </Routes>
    </MemoryRouter>
  );
  expect(screen.getByTestId(`main-title`)).toBeInTheDocument();
  expect(screen.getByTestId(`items-display`)).toBeInTheDocument();
});

it(`Renders twelve items`, ()=>{
  render(
    <MemoryRouter>
      <Routes>
        <Route path='/' element={<Store/>}/>
        <Route path="/item" element={<ItemPanel/>}/>
      </Routes>
    </MemoryRouter>
  );
  expect(screen.getAllByTestId('item-test')).toHaveLength(12);
}); 

it(`toggles cart panel on/off`,async()=>{
  render(
    <MemoryRouter>
      <Routes>
        <Route path="/" element={<Store/>}/>
      </Routes>
    </MemoryRouter>);

  userEvent.click(screen.getByAltText(`cart-icon`));

  await waitFor(()=>{
    expect(screen.getByRole(`button`, {name: `Checkout`})).toBeInTheDocument();
  });

  userEvent.click(screen.queryByAltText(`cart-icon`));

  await waitFor(()=>{
    expect(screen.queryByRole(`button`, {name: `Checkout`})).not.toBeInTheDocument();
  });
});

it.only(`Adds an item to cart`,async ()=>{
  render(
    <MemoryRouter>
      <Routes>
        <Route path='/' element={<Store/>}/>
        <Route path="/item" element={<ItemPanel/>}/>
      </Routes>
    </MemoryRouter>
  );

  fireEvent.click(screen.getByAltText(`Reaper`));
  fireEvent.click(screen.getByRole(`button`, {name: `Add`})) 
  fireEvent.click(screen.getByRole(`button`, {name: `X`}))
  fireEvent.click(screen.getByAltText(`cart-icon`))


});

||||||| 318ac63e
=======
import React from "react";
import {cleanup, render, screen, waitFor} from "@testing-library/react";
import  userEvent from "@testing-library/user-event";
import '@testing-library/jest-dom';
import Store from "./store";

afterEach(cleanup);

it(`renders correctly`,()=>{
  render(<Store/>);
  expect(screen.getByTestId(`main-title`)).toBeInTheDocument();
  expect(screen.getByTestId(`items-display`)).toBeInTheDocument();
  expect(screen.getByTestId(`cart-display`)).toBeInTheDocument();
});

it(`renders twelve items`, ()=>{
  render(<Store/>);
  expect(screen.getAllByTestId('item-test')).toHaveLength(12);
}); 

it(`toggles cart panel on/off`,async()=>{
  render(<Store/>);

  userEvent.click(screen.getByAltText(`cart-icon`));

  await waitFor(()=>{
    expect(screen.getByRole(`button`, {name: `Checkout`})).toBeInTheDocument();
  });

  userEvent.click(screen.queryByAltText(`cart-icon`));

  await waitFor(()=>{
    expect(screen.queryByRole(`button`, {name: `Checkout`})).not.toBeInTheDocument();
  });
});

it(`toggles item panel on/off`,async ()=>{
  render(<Store/>);

  userEvent.click(screen.getByAltText(`Reaper`));

  await waitFor(()=>{
    expect(screen.getByRole(`button`,{name:`Add`})).toBeInTheDocument();
  });

  userEvent.click(screen.getByAltText(`Reaper`));

  await waitFor(()=>{
    expect(screen.queryByRole(`button`, {name:`Add`})).not.toBeInTheDocument();
  });
});

>>>>>>> ea4ca75a693b1d3b4b9d2f8ab08ae084623573b4
